extends layout
block content  
  body(class='css-selector')
    //-- Header content
    header
      .profileLogo
        //-- Profile logo. Add a img tag in place of <span>.
        p.logoPlaceholder
          img(src='./images/me-logo-wht.png' alt='sample logo')      
      #installation
      button(id="playAudio" class='custom-button') Start Audio
      div(id="user_controls" class="hide")
        div(id="time_slider_container")
            img(src="./images/clock.png" class="icon")
            input(id='time_slider' type='range' min='0' max='1' value='1' step='0.0001')
        div(id="control_row_2")
            div(id="time_slider_accessories")
                div(id="slider_accessories")
                span(id='jump_to_history' class='custom-button') 
                    img(src="./images/clock.png" class="icon")
                    div Jump to time:
                span(id='text_slider_display' class='text-style')
            div(id="vol_container")
                img(src="./images/volume.png" class="icon")
                input(id="global_vol" class='global_vol' type="range" min='0' max='2' value='1' step='0.0001')
                img(src="./images/fullscreen.png" id='fullscreen' class='icon')
      br
      //- Header
      section.profileHeader
        h1 #{copy.title[0]}
        h3 #{copy.subtitle[0].toUpperCase()}
        for paragraph in copy.introduction
          p #{paragraph}
        br
      hr
      br
      br
      br
      - let composer = composerInfo;
      if composer
        .profilePhoto
          //- Profile photo
          img(src=composer.photo alt='sample' id='composer-photo')
      
      //- TODO history - populate profile info from template
      section.profileHeader
        if composer
          h3(id='time-header') This Week&apos;s Curator
          h1(id='composer-name') #{composer.name}
          p(id='composer-bio') #{composer.bio}
        p
          a(href='/past-composers') See all our past curators &raquo;
    //- content
    section.mainContent
      //- Detailed description of the installation
      section.section1
        h2.sectionTitle How It Works
        hr.sectionTitleRule
        hr.sectionTitleRule2
        .section1Content
          for paragraph, i in copy['how-it-works']
            //- expects subtitle, paragraph, empty line
            if i % 3 === 0
              p.sectionContentTitle #{paragraph}
            else
              p.sectionContent #{paragraph}
      //- Contributors to the installation
      section.section2
        h2.sectionTitle Meet The Team
        hr.sectionTitleRule
        hr.sectionTitleRule2
        for admin in admins
          article.section2Content
            h2.sectionContentTitle #{admin.name}
            h3.sectionContentSubTitle #{admin.role}
            p.sectionContent #{admin.description}
    footer
      hr
      p.footerDisclaimer
        | &copy; 2020 Metropolis Ensemble - 
        span All Rights Reserved
      p.footerNote
        | Contact Us - 
        span Email / Social
    
    <input id="fileSwap-0" type="file" style="display: none;" />
    <input id="fileSwap-1" type="file" style="display: none;" />
    <input id="fileSwap-2" type="file" style="display: none;" />
    <input id="fileSwap-3" type="file" style="display: none;" />
    <input id="fileSwap-4" type="file" style="display: none;" />
    <input id="fileSwap-5" type="file" style="display: none;" />
    <input id="fileSwap-6" type="file" style="display: none;" />
    
    //- expose server provided variables to main script
    script(nonce=nonce).
      let returns = JSON.parse(`!{fileNames}`);
      let audioData = JSON.parse(`!{audio}`);
      let isComposer = document.location.pathname == "/composer";
      let timestamp = !{timestamp};
      let firstEntry = !{firstEntry};
      let firstTimestamp = !{firstTimestamp};

    script(nonce=nonce src='./javascript/dat.gui.min.js')
    script(nonce=nonce src='./javascript/Tone.js')
    script(nonce=nonce src='./javascript/index.js')
