extends layout

block content
  

  if error
    p Error getting dynamic content.
  else
    p The following files are active:
    br

    - let returns = fileInfo.Contents
    - let returnsReversed = returns.reverse();
    - let files = returnsReversed.slice(0,7);
    - let lastUpload = returns[returns.length - 1];
                    
    div   
      each file in files ? files : ['NO!!!']   
        - let audioSrc = `https://fk-audio.s3.amazonaws.com/${file.Key}`                     
        div(class="solid")
          form(method="POST" action=`/replace/${file.Key}?_method=PUT` id="launchForm" encType="multipart/form-data")                          
            p= file.Key
            p= file.LastModified
            ol(class="listy" id=file.Key)            
              audio(controls, type="audio/mpeg" src=audioSrc class="audioElement")                
          input(type="submit" form="launchForm" value="REPLACE")
          - console.log(file.Key)
          br
          br      
    
    
    - let uploadSrc = `https://fk-audio.s3.amazonaws.com/${lastUpload.Key}`
    br
    br
    br
    div(class="dotted")
      p LAST FILE YOU UPLOADED:
      p= lastUpload.Key
      audio(controls, type="audio/mpeg" src=uploadSrc)   
      br      
      form(method="POST" action=`/delete/${lastUpload.Key}` id="deleteForm" encType="multipart/form-data" target="_blank")                                        
      input(type="submit" form="deleteForm" value="UNDO")
    

    script.
      
      
      
      
      
               
      function checkChecks(){
      // Query for only the checked checkboxes and put the result in an array
      let checked = Array.prototype.slice.call(document.querySelectorAll("input[type='checkbox']:checked"));      
      // Loop over the array and inspect contents
      checked.forEach(function(cb){
        persistData = cb.parentNode.id;        
        });
      console.log(persistData);
      };
      
      
          
      